deploy:
  needs: build-and-test
  runs-on: [self-hosted, ARM64, TradingBot]

  steps:
  - name: Build Docker Image for Deployment
    run: |
      docker build -t tradingbot:latest .

  - name: Deploy Application
    run: |
      docker stop tradingbot || true
      docker rm tradingbot || true
      docker run -d --name TradingBot \
        -p 80:80 \
        tradingbot:latest

  - name: Verify Running Containers
    run: docker ps

  - name: Health Check
    run: |
      curl -f http://localhost/health || exit 1
